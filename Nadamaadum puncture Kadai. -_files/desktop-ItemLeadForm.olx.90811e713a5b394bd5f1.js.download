(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[22],{1244:function(e,a,t){"use strict";var o=t(64),s=t.n(o),r=t(0),i=t.n(r),d=t(72),l=t.n(d),m=t(368);a.a=e=>{const a=a=>i.a.createElement(m.a,null,t=>i.a.createElement(e,s()({sendChatMessage:t.sendChatMessage},a)));return a.displayName="withMessage("+(e.displayName||e.name)+")",l()(a,e)}},1820:function(e,a,t){"use strict";t.r(a),t.d(a,"ItemLeadForm",(function(){return S})),t.d(a,"mapDispatchToProps",(function(){return w}));var o=t(2),s=t.n(o),r=(t(206),t(205),t(921),t(322),t(0)),i=t.n(r),d=t(47),l=t(35),m=t(911),n=t(325),c=t(327),h=t(3214),u=t.n(h),F=t(23),p=t(1244),L=t(83),b=(t(37),t(15),t(97)),g=t(100),C=Object(b.a)({loader:()=>t.e(25).then(t.bind(null,3508)),loading:Object(g.a)()}),f=t(17);class S extends i.a.Component{constructor(e){var a;super(),a=this,s()(this,"updateRefreshLeadForm",()=>{this.setState({refreshLeadForm:!0})}),s()(this,"leadFormFlow",()=>{const{trackerOrigins:e}=this.props;return this.leadFormGetError?this.props.actionCallback():(f.a.isLoggedIn()?this.openLeadForm(!1)():this.props.setLoginModalState({state:!0,redirectTo:"",entryPoint:0,callback:this.openLeadForm(!0),trackProps:{origin:e.CHAT_REPLY}}),null)}),s()(this,"loadLeadForm",()=>{this.setState({loadLeadForm:!0})}),s()(this,"openLeadForm",e=>()=>{e&&this.resetLeadForm(),this.setState({submitLeadForm:!0,showLeadForm:!0})}),s()(this,"resetLeadForm",()=>{this.setState({refreshLeadForm:!this.state.refreshLeadForm})}),s()(this,"sendChatMessage",e=>{const a=this.props.item;this.props.sendChatMessage(e.messageTemplate,a&&a.user_id,a&&a.id,"chat",{},()=>{},e.leadInfo)}),s()(this,"toggleShowLeadForm",()=>{this.setState({showLeadForm:!this.state.showLeadForm}),this.props.toggleLeadFormFlag()}),s()(this,"leadFormSuccessCallback",(function(e,t){void 0===t&&(t=!0),e&&!1===e.form&&(a.leadFormGetError=!0),a.state.showLeadForm&&a.toggleShowLeadForm(),a.state.submitLeadForm&&a.setState({submitLeadForm:!1}),t&&"onChatWindowTapCall"!==a.props.source&&a.resetLeadForm();const o=e&&e.data;if("onTapChat"===a.props.source?o&&a.sendChatMessage(o):"onTapCall"===a.props.source&&o&&a.sendChatMessage(o),a.state.showSubmitLeadFormLoader)a.hideLeadFormLoader();else if("onChatWindowTapCall"===a.props.source){if(o){const{leadInfo:{name:e,phone:t}}=o;a.props.actionCallback(e,t)}}else a.props.actionCallback()})),s()(this,"autoSubmitLeadForm",()=>{this.setState({showSubmitLeadFormLoader:!0},()=>{this.loaderStartTime=(new Date).getTime()})}),s()(this,"hideLeadFormLoader",()=>{const e=(new Date).getTime()-this.loaderStartTime;e>2e3?(this.setState({showSubmitLeadFormLoader:!1}),this.props.actionCallback()):setTimeout(()=>{this.setState({showSubmitLeadFormLoader:!1}),this.props.actionCallback()},2e3-e)}),s()(this,"onModalClick",()=>{}),this.state={refreshLeadForm:!1,submitLeadForm:!1,showLeadForm:!1,loadLeadForm:f.a.isLoggedIn()},e.item?(this.leadFormGetParams={filter:{seller_id:e.item.user_id,ad_id:e.item.id}},this.leadFormPostData={source:e.source,seller_id:e.item.user_id,ad_id:e.item.id}):(this.leadFormGetParams={},this.leadFormPostData={}),this.leadFormGetError=!1}componentDidUpdate(e){!this.state.loadLeadForm&&f.a.isLoggedIn()&&this.loadLeadForm(),this.props.openLeadFormFlow&&!e.openLeadFormFlow&&(this.props.resetLeadFormFlowValue(),this.leadFormFlow()),this.props.loginSuccess&&!e.loginSuccess&&this.updateRefreshLeadForm()}render(){return i.a.createElement(i.a.Fragment,null,this.state.showSubmitLeadFormLoader&&i.a.createElement(m.a,{className:u.a.leadFormLoader,icon:" ",onClick:this.onModalClick},i.a.createElement("div",{className:u.a.modalContent},i.a.createElement(n.a,{containerSize:"60px",stroke:"8px",className:u.a.loader}),i.a.createElement("div",{className:u.a.autosubmit},i.a.createElement(F.FormattedMessage,{id:"leadFormAutosubmitText"})))),this.props.leadFormName&&this.state.loadLeadForm&&i.a.createElement(C,{leadFormModalClick:this.toggleShowLeadForm,leadFormSuccessCallback:this.leadFormSuccessCallback,submitLeadForm:this.state.submitLeadForm,autoSubmitLeadForm:this.autoSubmitLeadForm,fromPage:this.props.leadFormName,leadFormGetParams:this.leadFormGetParams,leadFormPostData:this.leadFormPostData,showLeadForm:this.state.showLeadForm,refreshLeadForm:this.state.refreshLeadForm,resetRefreshLeadform:this.resetLeadForm,showSuccessPopup:!1,trackingCallback:this.props.trackingCallback}))}}s()(S,"defaultProps",{source:"",actionCallback:()=>{},toggleLeadFormFlag:()=>{},resetLeadFormFlowValue:()=>{}});const w=e=>({setLoginModalState:a=>e(Object(c.a)(a))});a.default=Object(l.compose)(p.a,L.a,Object(d.connect)("",w))(S)},3214:function(e,a,t){e.exports={leadFormLoader:"_1_yau",autosubmit:"_1msp1",loader:"_6u8wZ"}},911:function(e,a,t){"use strict";var o=t(41),s=t.n(o),r=t(9),i=t.n(r),d=(t(0),t(321)),l=t(58),m=t.n(l),n="rui-3Wb77",c="rui-3lc3b",h="rui-2_1rV",u="rui-1D_oM",F=function(e){var a=e.onClick,t=e.className,o=e.icon,r=e.title,i=e.children;return s()("div",{className:n},void 0,s()("div",{className:c,onClick:a,onKeyPress:a,role:"button",tabIndex:"0"}),s()("div",{className:m()(h,t)},void 0,o&&s()("span",{className:u,onClick:a,onKeyPress:a,role:"button",tabIndex:"0"},void 0,s()(d.a,{icon:o,color:"blackIcons",size:25})),r&&s()("h2",{},void 0,r),i))};F.propTypes={onClick:i.a.func.isRequired,className:i.a.string,icon:i.a.oneOfType([i.a.string,i.a.bool]),title:i.a.oneOfType([i.a.element,i.a.string]),children:i.a.node},F.defaultProps={className:"",icon:"cross",title:"",children:""},a.a=F},921:function(e,a,t){e.exports={"rui-3Wb77":"rui-3Wb77","rui-3lc3b":"rui-3lc3b","rui-2_1rV":"rui-2_1rV","rui-1D_oM":"rui-1D_oM"}}}]);
//# sourceMappingURL=desktop-ItemLeadForm.olx.90811e713a5b394bd5f1.js.map