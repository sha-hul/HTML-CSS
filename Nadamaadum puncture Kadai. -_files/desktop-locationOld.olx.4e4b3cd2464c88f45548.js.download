(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[70],{1085:function(e,t,n){"use strict";var a=n(0),o=n.n(a),s=n(23),i=n(875),c=n(58),l=n.n(c),r=n(1327),u=n.n(r),p=n(1152);const h=e=>{let{name:t,onSelect:n,highlight:a,iconClass:c,icon:r,showLabel:h,showFullText:d,id:m}=e;return o.a.createElement("div",{"data-aut-id":"locationItem",className:u.a.locationOption,onClick:n},o.a.createElement(i.a,{className:l()(u.a.icon,c),direction:"ltr",icon:r,name:"IconButton",id:m}),o.a.createElement("div",{className:u.a.text},h&&o.a.createElement("div",{className:u.a.currentLocationLabel},o.a.createElement(s.FormattedMessage,{id:"useCurrentLocationLabel"})),a?o.a.createElement(p.a,{text:t,term:a}):o.a.createElement("span",{className:l()({[u.a.fullText]:d})},t)))};h.defaultProps={icon:"location",iconClass:"",showLabel:!1,showFullText:!1,id:"",name:"",onSelect:()=>{}},t.a=h},1150:function(e,t,n){"use strict";n(261),n(329);var a=n(0),o=n.n(a),s=n(213),i=n(23),c=n(58),l=n.n(c),r=n(1192),u=n.n(r),p=n(875);t.a=Object(i.injectIntl)(e=>{let{intl:t,onClose:n}=e;return o.a.createElement("div",{"data-aut-id":"gps-blocked-modal"},o.a.createElement(s.a,{isOpened:!0,overlayClassName:l()(u.a.gpsBlocked),contentClassName:l()(u.a.modal),onClose:n},o.a.createElement("div",{className:l()(u.a.close)},o.a.createElement(p.a,{dataAutId:"btnClose",onClick:n,icon:"cross",size:24,color:"blackIcons"})),o.a.createElement("div",{className:l()(u.a.container)},o.a.createElement("div",{className:l()(u.a.title)},o.a.createElement("span",null,t.formatMessage({id:"geolocation_blocked"}))),o.a.createElement("div",{className:l()(u.a.description)},o.a.createElement("span",null,t.formatMessage({id:"geolocation_blocked_description"}))))))})},1152:function(e,t,n){"use strict";n(155),n(264),n(152),n(39),n(33);var a=n(0),o=n.n(a),s=n(27);const i=e=>{let{text:t,term:n,caseSensitive:a}=e;if(!n)return o.a.createElement("span",null,t);const i=Object(s.e)(n.trim()),c=new RegExp(i,a?"":"i"),l=c.exec(t)?c.exec(t)[0]:n;return o.a.createElement("span",null,t.split(c).reduce((e,t,a)=>a?e.concat(o.a.createElement("b",{key:n+t},l),t):[t],[]))};i.defaultProps={term:null,caseSensitive:!1},t.a=i},1192:function(e,t,n){e.exports={gpsBlocked:"_2jpuP",modal:"_1ODbZ",close:"IC_2Q",container:"_3c7lV",title:"vzZv8",description:"-MdET"}},1208:function(e,t,n){e.exports={sectionLocations:"J5Oaw",sectionLocationsTitle:"_394vO",currentLocationIcon:"N5UMO",currentLocation:"_3bkgS"}},1327:function(e,t,n){e.exports={locationOption:"_1jtbH",icon:"_1k7ch",text:"_3z-s0",fullText:"_3Aqq7",currentLocationLabel:"_1nWq6"}},1333:function(e,t,n){"use strict";var a=n(64),o=n.n(a),s=n(2),i=n.n(s),c=(n(15),n(37),n(0)),l=n.n(c),r=n(47),u=n(35),p=n(72),h=n.n(p),d=n(180),m=n(348),g=n(48),L=n(63);t.a=e=>{class t extends l.a.Component{constructor(){super(...arguments),i()(this,"componentDidMount",()=>this.getPopularLocations()),i()(this,"componentDidUpdate",()=>this.getPopularLocations()),i()(this,"getPopularLocations",()=>{this.props.marketConfig.get("enableTopLocations")&&this.props.dispatch(Object(d.e)())})}render(){const{isFetchingPopular:t,popular:n}=this.props;return l.a.createElement(e,o()({},this.props,{isFetchingPopularLocations:t,popularLocations:n}))}}t.fetchData=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];const[o,,,s]=n,i=[e.fetchData?e.fetchData(...n):Promise.resolve()];return Promise.all(i).then(()=>s.config&&s.config.enableTopLocations?o(Object(d.e)()):Promise.resolve())};const n=e.displayName||e.name||"Component";t.displayName="withPopularLocations("+n+")";const a=Object(u.compose)(Object(L.b)("marketConfig"),Object(r.connect)(e=>({popular:Object(m.f)(e),isFetchingPopular:Object(m.d)(e),countryLocation:Object(g.countryLocationSelector)(e)})))(t);return h()(a,e,{fetchData:!0})}},1495:function(e,t,n){var a=n(1496),o=n(1497)((function(e,t){return null==e?{}:a(e,t)}));e.exports=o},1496:function(e,t,n){var a=n(506),o=n(505);e.exports=function(e,t){return a(e,t,(function(t,n){return o(e,n)}))}},1497:function(e,t,n){var a=n(372),o=n(507),s=n(508);e.exports=function(e){return s(o(e,void 0,a),e+"")}},1499:function(e,t,n){"use strict";n(15);var a=n(0),o=n.n(a),s=n(278),i=n.n(s),c=n(35),l=n(47),r=n(23),u=n(1208),p=n.n(u),h=n(1085),d=n(217),m=n(14),g=n(48);t.a=Object(c.compose)(Object(l.connect)(e=>({gpsData:Object(g.gpsSelector)(e)}),e=>({getNearByAds:t=>e(Object(d.b)(t))})),r.injectIntl)(e=>{let{onChange:t,onLoading:n,getNearByAds:s,intl:c,gpsData:l}=e;const r=function(e,t){let{location:n={},status:a=null,isFetching:o}=e;const s=n&&Object.keys(n).length;if(o&&!s)return t.formatMessage({id:"fetchingLocationLabel"});if(null===a||"prompt"===a)return t.formatMessage({id:"enableLocationLabel"});if("rejected"===a)return t.formatMessage({id:"gpsBlockedLabel"});if(s){return Array.from(new Set(i()(n,"name"))).join(", ")}return t.formatMessage({id:"current_gps_location_label"})}(l,c),u=Object(a.useCallback)(()=>s(n).then(e=>t(e,{location_type:m.eb})).catch(()=>t()),[s,n,t]);return o.a.createElement("div",{className:p.a.sectionLocations+" "+p.a.currentLocation},o.a.createElement(h.a,{name:r,icon:"crosshairs",onSelect:u,id:p.a.currentLocationIcon,showLabel:!0,showFullText:"rejected"===l.status}))})},1731:function(e,t,n){e.exports={locationAutocomplete:"_3hLH0",containerInput:"_3B6d0",mxclContainerInput:"_18WJk",inputLocation:"_2xvhw",arrowIcon:"_1fwdq",arrowIconUp:"_3K9uU",defaultOptions:"XV1Vg",suggestionsOptions:"_1PMKr",hide:"_1mMzE",fullPageLoader:"xcTIF",iconLoader:"_2sUw_",tryAgain:"_3gTdk"}},1733:function(e,t,n){e.exports={locationSuggestions:"-cMA-",containerOptions:"_2HzJo"}},1735:function(e,t,n){e.exports={errorMessage:"_3JXP2",content:"_1Ve0U",close:"_1EY0K"}},1988:function(e,t,n){"use strict";n.r(t),n.d(t,"WAIT_INTERVAL",(function(){return q})),n.d(t,"LocationAutocomplete",(function(){return J}));var a=n(2),o=n.n(a),s=(n(155),n(326),n(322),n(206),n(205),n(871),n(0)),i=n.n(s),c=n(58),l=n.n(c),r=n(35),u=n(211),p=n(325),h=n(869),d=n(321),m=n(1731),g=n.n(m),L=n(1495),f=n.n(L),E=n(47),C=n(48),b=n(373),O=n(89),v=n(180),_=n(23),S=n(17),T=n(83),N=n(63),k=n(1333),w=n(1208),x=n.n(w),j=n(1085),M=n(14);var I=e=>{let{popularLocations:t=[],maxLocations:n,onChange:a}=e;const o=t&&t.slice(0,n);return o.length?i.a.createElement("div",{className:x.a.sectionLocations},i.a.createElement("div",{className:x.a.sectionLocationsTitle},i.a.createElement(_.FormattedMessage,{id:"popularLocations"})),i.a.createElement("div",null,o.map((e,t)=>i.a.createElement(j.a,{key:t,name:e.name,onSelect:()=>a(e,{location_type:M.fb})})))):null};var y=e=>{let{selectedLocation:t={},recentLocations:n,onChange:a}=e;const o=n&&!!n.length&&n.filter(e=>e.id!==t.id);return o.length?i.a.createElement("div",{className:x.a.sectionLocations},i.a.createElement("div",{className:x.a.sectionLocationsTitle},i.a.createElement(_.FormattedMessage,{id:"recentLocations"})),i.a.createElement("div",null,o.map((e,t)=>i.a.createElement(j.a,{key:t,name:e.name,onSelect:()=>a(e,{location_type:M.gb})})))):null},P=n(133),A=n(1733),F=n.n(A);var D=e=>{let{suggestions:t,onChange:n,searchTerm:a,suggestionsListClass:o}=e;return i.a.createElement("div",{className:l()(o,F.a.locationSuggestions)},i.a.createElement("div",{className:F.a.containerOptions},t&&t.map(e=>i.a.createElement(j.a,{key:e.id,name:Object(P.a)(e.addressComponents)||e.name,highlight:a,onSelect:()=>n(e,{location_type:M.hb})}))))},G=n(1499),B=(n(15),n(324)),U=n(1735),H=n.n(U);const{icons:z}=B.a;class V extends i.a.Component{constructor(){super(...arguments),o()(this,"componentDidMount",()=>document.addEventListener("mousedown",this.handleClickOutside)),o()(this,"componentWillUnmount",()=>document.removeEventListener("mousedown",this.handleClickOutside)),o()(this,"handleClickOutside",e=>{this.containerRef&&!this.containerRef.contains(e.target)&&this.props.onClose()})}render(){const{elementNode:e,onClose:t,message:n}=this.props,a=e&&{width:e.offsetWidth,top:e.offsetHeight+e.offsetTop+5,left:e.offsetLeft};return e?i.a.createElement("div",{className:H.a.errorMessage,style:a,ref:e=>this.containerRef=e},i.a.createElement("div",{className:H.a.content},i.a.createElement("span",{className:l()(z.panameraIcons,z["icon-Cross"],H.a.close),onClick:t}),n)):null}}o()(V,"defaultProps",{onClose:()=>{}});var K=V,R=n(217),W=n(1150),X=n(99);const q=300;class J extends i.a.PureComponent{constructor(e){super(e),o()(this,"componentDidUpdate",e=>{const{selectedLocation:t,isSelectedLocationGPSSelector:n,selectedLocationName:a}=this.props;t.id===e.selectedLocation.id&&n===e.isSelectedLocationGPSSelector||this.setState({input:a})}),o()(this,"focusInputContainer",()=>{this.inputContainer&&(this.inputContainer.select(),this.inputContainer.click())}),o()(this,"handleCloseTooltip",()=>this.setState({showError:!1})),o()(this,"handleLoading",e=>{this.setState({isLoading:e}),this.props.onLoading(e)}),o()(this,"handleOnchange",(e,t)=>{e?(this.setState({isTyping:!1},()=>this.props.onChange(e,t)),Object(O.h)(e)):this.handleGpsMessage()}),o()(this,"handleOnFocus",()=>{this.props.onFocus("location"),this.focusInputContainer(),this.props.track(M.K,{origin:this.props.trackOrigin,select_from:this.props.trackSelectFrom,place_selected_id:this.props.selectedLocation.id})}),o()(this,"handleOnFocusIcon",()=>this.focusInputContainer()),o()(this,"handleChangeValue",e=>{clearTimeout(this.timer);const t=e.currentTarget.value;t.trim().length>0?this.setState({input:t,isTyping:!0},()=>{t.length>2&&(this.timer=setTimeout(this.handleGetSuggestions,q))}):this.setState({input:"",isTyping:!1})}),o()(this,"handleGetSuggestions",()=>this.props.getSuggestions(f()(this.state,"input","limit"))),o()(this,"handleClearInput",()=>{this.setState({input:"",isTyping:!1}),this.focusInputContainer()}),o()(this,"handleTryAgain",()=>{this.handleCloseTooltip(),this.focusInputContainer()}),o()(this,"handleGpsMessage",()=>{Object(R.a)().then(()=>this.handleCloseGpsMessage()).catch(()=>this.setState({showGpsBlockedMessage:!0}))}),o()(this,"handleCloseGpsMessage",()=>this.setState({showGpsBlockedMessage:!1},this.handleOnFocusIcon)),this.state={isTyping:!1,limit:5,input:e.selectedLocationName,loggedUser:S.a.getUser(),isLoading:!1,showError:!1,showGpsBlockedMessage:!1},this.translations={currentLocation:{id:"use_current_location"},searchLocationHint:{id:"searchLocationHint"},locationErrorTooltip:{id:"locationErrorTooltip"},locationErrorTooltipTry:{id:"locationErrorTooltipTry"}},this.inputContainer=null,this.isMXCL=e.config.get("olxAutos","isMXCL")}componentDidMount(){this.inputContainer&&this.props.defaultFocus&&this.focusInputContainer(),this.timer=null,this.props.updateGPSStatus()}render(){const e=this.props.suggestions(f()(this.state,"input","limit"))||[],{visible:t,popularLocations:n,config:a,selectedLocation:o,suggestionsClass:s,intl:c,withArrow:r}=this.props,{isTyping:m,input:L,showError:E,isLoading:C,showGpsBlockedMessage:O}=this.state,v=Object(b.b)(),_=i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,c.formatMessage(this.translations.locationErrorTooltip)," "),i.a.createElement("span",{className:g.a.tryAgain,onClick:this.handleTryAgain},c.formatMessage(this.translations.locationErrorTooltipTry))),S=r?i.a.createElement("span",{className:l()(g.a.arrowIcon,{[g.a.arrowIconUp]:t})},i.a.createElement(h.a,{icon:"arrowDown",color:"blackText",animation:!1,onClick:t?this.props.onLostFocus:this.handleOnFocus})):null;return i.a.createElement("div",{className:g.a.locationAutocomplete},i.a.createElement("div",{"data-aut-id":"locationBox",className:l()(g.a.containerInput,{[g.a.mxclContainerInput]:this.isMXCL},this.props.containerClassName),ref:e=>this.containerTooltip=e},C?i.a.createElement(p.a,{className:g.a.iconLoader,containerSize:"32px"}):i.a.createElement(d.a,{icon:this.props.locIcon||"search",color:"blackText",size:25}),i.a.createElement("input",{className:g.a.inputLocation,value:L,placeholder:c.formatMessage(this.translations.searchLocationHint),onChange:this.handleChangeValue,onFocus:this.handleOnFocus,ref:e=>{this.inputContainer=e}}),m?i.a.createElement("span",{className:g.a.clearIcon},i.a.createElement(h.a,{icon:"cross",color:"blackText",animation:!1,onClick:this.handleClearInput})):S,E&&i.a.createElement(K,{message:_,elementNode:this.containerTooltip,onClose:this.handleCloseTooltip})),t&&(e&&!!e.length||!m)&&i.a.createElement("div",{className:l()(g.a.wrapperOptions,s)},e&&!!e.length&&i.a.createElement(D,{suggestions:e,onChange:this.handleOnchange,searchTerm:L,suggestionsListClass:g.a.suggestionsOptions}),!m&&i.a.createElement("div",{className:g.a.defaultOptions},i.a.createElement(G.a,{onChange:this.handleOnchange,onLoading:this.handleLoading}),i.a.createElement(y,{selectedLocation:o,recentLocations:v,onChange:this.handleOnchange}),i.a.createElement(I,{popularLocations:n,maxLocations:a.get("searchHeader","maxPopularLocations"),onChange:this.handleOnchange}))),C&&this.props.showLoading&&i.a.createElement(u.a,{className:g.a.fullPageLoader,text:c.formatMessage({id:"loadingAdsToRelocate"})}),O&&i.a.createElement(W.a,{onClose:this.handleCloseGpsMessage}))}}o()(J,"defaultProps",{config:{},getSuggestions:X.a,suggestions:X.a,selectedLocation:{},trackOrigin:"",onChange:X.a,onFocus:X.a,onLostFocus:X.a,suggestionsClass:"",defaultFocus:!1,showLoading:!0,visible:!1,onLoading:X.a,onClickOutside:X.a,withArrow:!1,updateGPSStatus:X.a});t.default=Object(r.compose)(T.a,N.a,k.a,_.injectIntl,Object(E.connect)((e,t)=>({suggestions:t=>Object(C.suggestionsSelector)(e,t),trackOrigin:e.track.origin,selectedLocation:Object(C.selectedLocationSelector)(e),isSelectedLocationGPSSelector:Object(C.isSelectedLocationGPSSelector)(e),selectedLocationName:Object(C.selectedLocationNameSelector)(e,t)}),e=>({getSuggestions:t=>e(Object(v.f)(t)),updateGPSStatus:()=>e(Object(v.j)())})))(J)}}]);
//# sourceMappingURL=desktop-locationOld.olx.4e4b3cd2464c88f45548.js.map